# å°ˆæ¡ˆé–‹ç™¼è¦ç¯„

## èªè¨€åå¥½
**é‡è¦: æ‰€æœ‰äº’å‹•å¿…é ˆä½¿ç”¨ç¹é«”ä¸­æ–‡**
- æ‰€æœ‰å›æ‡‰ä½¿ç”¨ç¹é«”ä¸­æ–‡
- ç¨‹å¼ç¢¼è¨»è§£ä½¿ç”¨ç¹é«”ä¸­æ–‡
- æ–‡ä»¶ä½¿ç”¨ç¹é«”ä¸­æ–‡æ’°å¯«
- Commit è¨Šæ¯ä½¿ç”¨ç¹é«”ä¸­æ–‡

---

## é–‹ç™¼è¦ç¯„

### å¿…é ˆéµå®ˆçš„åŸå‰‡

#### 1. TDD (æ¸¬è©¦é©…å‹•é–‹ç™¼)
**å·¥ä½œæµç¨‹:**
- ğŸ”´ **ç´…ç‡ˆ**: å…ˆå¯«å¤±æ•—çš„æ¸¬è©¦
- ğŸŸ¢ **ç¶ ç‡ˆ**: å¯«æœ€å°‘çš„ç¨‹å¼ç¢¼è®“æ¸¬è©¦é€šé
- ğŸ”„ **é‡æ§‹**: æ”¹å–„ç¨‹å¼ç¢¼å“è³ª,ç¢ºä¿æ¸¬è©¦ä»é€šé

**è¦æ±‚:**
- æ¯å€‹åŠŸèƒ½éƒ½è¦æœ‰å°æ‡‰çš„æ¸¬è©¦
- ä¸å…ˆå¯«æ¸¬è©¦å°±ä¸å¯«å¯¦ä½œ
- æ¸¬è©¦è¦†è“‹ç‡è¦é”åˆ°åˆç†æ°´æº–

#### 2. SOLID åŸå‰‡

**S - Single Responsibility Principle (å–®ä¸€è·è²¬åŸå‰‡)**
- æ¯å€‹é¡åˆ¥åªåšä¸€ä»¶äº‹
- ä¸€å€‹é¡åˆ¥åªæœ‰ä¸€å€‹æ”¹è®Šçš„ç†ç”±
- é¿å…ã€Œä¸Šå¸é¡åˆ¥ã€(God Class)

**O - Open/Closed Principle (é–‹æ”¾å°é–‰åŸå‰‡)**
- å°æ“´å±•é–‹æ”¾:å¯ä»¥æ–°å¢åŠŸèƒ½
- å°ä¿®æ”¹å°é–‰:ä¸ä¿®æ”¹æ—¢æœ‰ç¨‹å¼ç¢¼
- é€éç¹¼æ‰¿ã€ä»‹é¢ã€çµ„åˆä¾†æ“´å±•

**L - Liskov Substitution Principle (é‡Œæ°æ›¿æ›åŸå‰‡)**
- å­é¡åˆ¥å¯ä»¥æ›¿æ›çˆ¶é¡åˆ¥
- ä¸ç ´å£çˆ¶é¡åˆ¥çš„è¡Œç‚ºå¥‘ç´„
- å­é¡åˆ¥ä¸æ‡‰è©²æ”¹è®Šçˆ¶é¡åˆ¥çš„é æœŸè¡Œç‚º

**I - Interface Segregation Principle (ä»‹é¢éš”é›¢åŸå‰‡)**
- ä¸å¼·è¿«é¡åˆ¥ä¾è³´ä¸éœ€è¦çš„æ–¹æ³•
- å°‡å¤§ä»‹é¢æ‹†åˆ†æˆå°ä»‹é¢
- å®¢æˆ¶ç«¯åªä¾è³´éœ€è¦çš„ä»‹é¢

**D - Dependency Inversion Principle (ä¾è³´åè½‰åŸå‰‡)**
- é«˜å±¤æ¨¡çµ„ä¸ä¾è³´ä½å±¤æ¨¡çµ„,éƒ½ä¾è³´æŠ½è±¡
- æŠ½è±¡ä¸ä¾è³´ç´°ç¯€,ç´°ç¯€ä¾è³´æŠ½è±¡
- ä½¿ç”¨ä¾è³´æ³¨å…¥ (Dependency Injection)

---

## é–‹ç™¼æª¢æŸ¥æ¸…å–®

### é–‹ç™¼æ–°åŠŸèƒ½å‰
- [ ] æ˜¯å¦å…ˆå¯«å¥½æ¸¬è©¦æ¡ˆä¾‹?
- [ ] æ¸¬è©¦æ¡ˆä¾‹æ˜¯å¦æ¶µè“‹æ­£å¸¸æƒ…æ³å’Œé‚Šç•Œæƒ…æ³?
- [ ] æ˜¯å¦è€ƒæ…®äº† SOLID åŸå‰‡?

### å¯¦ä½œç¨‹å¼ç¢¼æ™‚
- [ ] æ˜¯å¦åªå¯«è®“æ¸¬è©¦é€šéçš„æœ€å°‘ç¨‹å¼ç¢¼?
- [ ] é¡åˆ¥æ˜¯å¦åªæœ‰å–®ä¸€è·è²¬?
- [ ] æ˜¯å¦ä½¿ç”¨ä¾è³´æ³¨å…¥è€Œéç¡¬ç·¨ç¢¼ä¾è³´?

### é‡æ§‹æ™‚
- [ ] é‡æ§‹å¾Œæ¸¬è©¦æ˜¯å¦ä»ç„¶é€šé?
- [ ] ç¨‹å¼ç¢¼æ˜¯å¦æ›´æ˜“è®€ã€æ˜“ç¶­è­·?
- [ ] æ˜¯å¦ç§»é™¤äº†é‡è¤‡çš„ç¨‹å¼ç¢¼?
- [ ] æ˜¯å¦ç¬¦åˆå°ˆæ¡ˆçš„å‘½åè¦ç¯„?

### æäº¤å‰
- [ ] æ‰€æœ‰æ¸¬è©¦æ˜¯å¦é€šé?
- [ ] ç¨‹å¼ç¢¼æ˜¯å¦å·²ç¶“æ ¼å¼åŒ–?
- [ ] æ˜¯å¦æœ‰é©ç•¶çš„ç¹é«”ä¸­æ–‡è¨»è§£?
- [ ] Commit è¨Šæ¯æ˜¯å¦æ¸…æ¥šæè¿°è®Šæ›´?

---

## ç¨‹å¼ç¢¼ç¯„ä¾‹

### âŒ ä¸å¥½çš„ç¯„ä¾‹ (é•å SOLID)

```python
# é•åå–®ä¸€è·è²¬åŸå‰‡ - ä¸€å€‹é¡åˆ¥åšå¤ªå¤šäº‹
class UserManager:
    def create_user(self, data):
        # é©—è­‰è³‡æ–™
        if not data.get('email'):
            raise ValueError('Email is required')
        
        # é€£æ¥è³‡æ–™åº«
        conn = mysql.connect(host='localhost', user='root')
        
        # å„²å­˜ä½¿ç”¨è€…
        cursor = conn.cursor()
        cursor.execute("INSERT INTO users ...")
        
        # ç™¼é€æ­¡è¿ä¿¡
        smtp = smtplib.SMTP('smtp.gmail.com')
        smtp.send_email(...)
        
        # è¨˜éŒ„æ—¥èªŒ
        print(f"User created: {data['email']}")
```

### âœ… å¥½çš„ç¯„ä¾‹ (éµå¾ª SOLID)

```python
# å–®ä¸€è·è²¬ - æ¯å€‹é¡åˆ¥åªåšä¸€ä»¶äº‹
class UserValidator:
    """è² è²¬é©—è­‰ä½¿ç”¨è€…è³‡æ–™"""
    def validate(self, data: dict) -> bool:
        """é©—è­‰ä½¿ç”¨è€…è³‡æ–™æ˜¯å¦æœ‰æ•ˆ"""
        if not data.get('email'):
            raise ValueError('Email æ˜¯å¿…å¡«æ¬„ä½')
        return True

class UserRepository:
    """è² è²¬ä½¿ç”¨è€…è³‡æ–™çš„æŒä¹…åŒ–"""
    def __init__(self, db_connection):
        self.db = db_connection
    
    def save(self, user: User) -> int:
        """å„²å­˜ä½¿ç”¨è€…åˆ°è³‡æ–™åº«"""
        cursor = self.db.cursor()
        cursor.execute("INSERT INTO users ...", user.to_dict())
        return cursor.lastrowid

class EmailService:
    """è² è²¬ç™¼é€éƒµä»¶"""
    def __init__(self, smtp_client):
        self.smtp = smtp_client
    
    def send_welcome_email(self, user: User) -> None:
        """ç™¼é€æ­¡è¿éƒµä»¶çµ¦æ–°ä½¿ç”¨è€…"""
        self.smtp.send_email(
            to=user.email,
            subject='æ­¡è¿åŠ å…¥',
            body=f'æ­¡è¿ {user.name}!'
        )

class UserService:
    """å”èª¿å„å€‹æœå‹™å®Œæˆä½¿ç”¨è€…å‰µå»ºæµç¨‹"""
    def __init__(
        self,
        validator: UserValidator,
        repository: UserRepository,
        email_service: EmailService,
        logger
    ):
        self.validator = validator
        self.repository = repository
        self.email_service = email_service
        self.logger = logger
    
    def create_user(self, data: dict) -> User:
        """
        å‰µå»ºæ–°ä½¿ç”¨è€…
        
        éµå¾ª TDD:
        1. å…ˆå¯«æ¸¬è©¦é©—è­‰æ­¤æ–¹æ³•çš„è¡Œç‚º
        2. å†å¯¦ä½œæ­¤æ–¹æ³•
        3. é‡æ§‹å„ªåŒ–
        """
        # é©—è­‰
        self.validator.validate(data)
        
        # å»ºç«‹ä½¿ç”¨è€…ç‰©ä»¶
        user = User(**data)
        
        # å„²å­˜
        user.id = self.repository.save(user)
        
        # ç™¼é€æ­¡è¿ä¿¡
        self.email_service.send_welcome_email(user)
        
        # è¨˜éŒ„
        self.logger.info(f'ä½¿ç”¨è€…å·²å‰µå»º: {user.email}')
        
        return user
```

### TDD æ¸¬è©¦ç¯„ä¾‹

```python
import pytest
from unittest.mock import Mock

class TestUserService:
    """UserService çš„æ¸¬è©¦æ¡ˆä¾‹"""
    
    def setup_method(self):
        """æ¯å€‹æ¸¬è©¦å‰çš„æº–å‚™å·¥ä½œ"""
        self.validator = Mock(spec=UserValidator)
        self.repository = Mock(spec=UserRepository)
        self.email_service = Mock(spec=EmailService)
        self.logger = Mock()
        
        self.service = UserService(
            self.validator,
            self.repository,
            self.email_service,
            self.logger
        )
    
    def test_create_user_æ‡‰è©²é©—è­‰è³‡æ–™(self):
        """æ¸¬è©¦: å‰µå»ºä½¿ç”¨è€…æ™‚æ‡‰è©²å…ˆé©—è­‰è³‡æ–™"""
        # Arrange (æº–å‚™)
        user_data = {'email': 'test@example.com', 'name': 'æ¸¬è©¦ä½¿ç”¨è€…'}
        
        # Act (åŸ·è¡Œ)
        self.service.create_user(user_data)
        
        # Assert (é©—è­‰)
        self.validator.validate.assert_called_once_with(user_data)
    
    def test_create_user_æ‡‰è©²å„²å­˜ä½¿ç”¨è€…åˆ°è³‡æ–™åº«(self):
        """æ¸¬è©¦: å‰µå»ºä½¿ç”¨è€…æ™‚æ‡‰è©²å„²å­˜åˆ°è³‡æ–™åº«"""
        # Arrange
        user_data = {'email': 'test@example.com', 'name': 'æ¸¬è©¦ä½¿ç”¨è€…'}
        self.repository.save.return_value = 123
        
        # Act
        user = self.service.create_user(user_data)
        
        # Assert
        self.repository.save.assert_called_once()
        assert user.id == 123
    
    def test_create_user_æ‡‰è©²ç™¼é€æ­¡è¿éƒµä»¶(self):
        """æ¸¬è©¦: å‰µå»ºä½¿ç”¨è€…æ™‚æ‡‰è©²ç™¼é€æ­¡è¿éƒµä»¶"""
        # Arrange
        user_data = {'email': 'test@example.com', 'name': 'æ¸¬è©¦ä½¿ç”¨è€…'}
        
        # Act
        user = self.service.create_user(user_data)
        
        # Assert
        self.email_service.send_welcome_email.assert_called_once_with(user)
    
    def test_create_user_ç•¶é©—è­‰å¤±æ•—æ™‚æ‡‰è©²æ‹‹å‡ºä¾‹å¤–(self):
        """æ¸¬è©¦: é©—è­‰å¤±æ•—æ™‚æ‡‰è©²æ‹‹å‡ºä¾‹å¤–ä¸”ä¸å„²å­˜"""
        # Arrange
        user_data = {'name': 'æ¸¬è©¦ä½¿ç”¨è€…'}  # ç¼ºå°‘ email
        self.validator.validate.side_effect = ValueError('Email æ˜¯å¿…å¡«æ¬„ä½')
        
        # Act & Assert
        with pytest.raises(ValueError, match='Email æ˜¯å¿…å¡«æ¬„ä½'):
            self.service.create_user(user_data)
        
        # ç¢ºä¿æ²’æœ‰å„²å­˜åˆ°è³‡æ–™åº«
        self.repository.save.assert_not_called()
```

---

## é‡è¦æé†’

ç•¶æ‚¨è¦æ±‚ Claude Code é–‹ç™¼æ–°åŠŸèƒ½æ™‚,è«‹è¨˜å¾—:

1. **å…ˆè¦æ±‚å¯«æ¸¬è©¦**
   ```
   "è«‹å…ˆç‚ºé€™å€‹åŠŸèƒ½å¯«æ¸¬è©¦æ¡ˆä¾‹,ä½¿ç”¨ pytest,ç¢ºä¿æ¶µè“‹æ­£å¸¸æµç¨‹å’ŒéŒ¯èª¤è™•ç†"
   ```

2. **å†è¦æ±‚å¯¦ä½œ**
   ```
   "ç¾åœ¨è«‹å¯¦ä½œç¨‹å¼ç¢¼,è®“æ¸¬è©¦é€šé,ä¸¦éµå¾ª SOLID åŸå‰‡"
   ```

3. **æœ€å¾Œè¦æ±‚é‡æ§‹**
   ```
   "è«‹å¯©æŸ¥ç¨‹å¼ç¢¼,é‡æ§‹æ”¹å–„å¯è®€æ€§å’Œç¶­è­·æ€§,ç¢ºä¿æ¸¬è©¦ä»é€šé"
   ```

---

## Claude Code ä½¿ç”¨æç¤º

### é–‹ç™¼æ–°åŠŸèƒ½çš„æ¨™æº–æµç¨‹

```bash
# 1. å‰µå»ºæ–°åˆ†æ”¯
"è«‹å‰µå»ºä¸€å€‹æ–°åˆ†æ”¯å«åš feature/user-authentication"

# 2. è¦æ±‚å¯«æ¸¬è©¦
"è«‹å…ˆç‚ºä½¿ç”¨è€…èªè­‰åŠŸèƒ½å¯«å®Œæ•´çš„æ¸¬è©¦æ¡ˆä¾‹,åŒ…å«:
- æˆåŠŸç™»å…¥
- å¯†ç¢¼éŒ¯èª¤
- ä½¿ç”¨è€…ä¸å­˜åœ¨
- Token é©—è­‰"

# 3. ç¢ºèªæ¸¬è©¦å¾Œå†å¯¦ä½œ
"æ¸¬è©¦çœ‹èµ·ä¾†ä¸éŒ¯,ç¾åœ¨è«‹å¯¦ä½œç¨‹å¼ç¢¼,ç¢ºä¿:
- éµå¾ª SOLID åŸå‰‡
- ä½¿ç”¨ä¾è³´æ³¨å…¥
- æ‰€æœ‰è¨»è§£ç”¨ç¹é«”ä¸­æ–‡"

# 4. åŸ·è¡Œæ¸¬è©¦
"è«‹åŸ·è¡Œæ¸¬è©¦,ç¢ºä¿å…¨éƒ¨é€šé"

# 5. é‡æ§‹
"è«‹å¯©æŸ¥ç¨‹å¼ç¢¼,çœ‹æ˜¯å¦æœ‰å¯ä»¥æ”¹å–„çš„åœ°æ–¹,é‡æ§‹å¾Œå†æ¬¡åŸ·è¡Œæ¸¬è©¦"

# 6. æäº¤
"è«‹æäº¤è®Šæ›´,Commit è¨Šæ¯ç”¨ç¹é«”ä¸­æ–‡æ¸…æ¥šæè¿°åšäº†ä»€éº¼"
```

---

**è¨˜ä½: å¥½çš„ç¨‹å¼ç¢¼æ˜¯æ¸¬è©¦å‡ºä¾†çš„,ä¸æ˜¯ä¸€æ¬¡å¯«å°çš„!**
